#!/usr/bin/env bash
# This script installs and configures Nginx on an Ubuntu server

# Install Nginx
if ! dpkg -l | grep -q nginx; then
    apt-get update
    apt-get -y install nginx
fi

# Configure Nginx to listen on port 80
if ! grep -q "listen 80;" /etc/nginx/sites-available/default; then
    sed -i '/listen 80 default_server;/a \\\tlocation / {\n\t\techo "Hello World!";\n\t}' /etc/nginx/sites-available/default
fi

# Restart Nginx without using systemctl
kill -HUP $(pgrep -f /usr/sbin/nginx)

exit 0
